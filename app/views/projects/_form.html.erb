<script type="text/javascript">
$('document').ready(function(){
  var counter = 1;
  $('#add').click(function(){
      counter++;
      var new_field = '<div class="screenshot"><input id="project_images_attributes_'+counter+'_upload" name="project[images_attributes]['+counter+'][upload]" type="file"><input id="project_images_attributes_'+counter+'_image_type" name="project[images_attributes]['+counter+'][image_type]" type="hidden" value="screenshot"><input id="project_images_attributes_'+counter+'_image_type" name="project[images_attributes]['+counter+'][image_type]" type="hidden" value="screenshot"></div>';
        $('.screenshot:last').append(new_field);
  });
})
</script>

<%= form_for(@project, :html => { :multipart => true }) do |f| %>
  <% if @project.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>

      <ul>
      <% @project.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <label>Github Repository (username/repo-name)</label>
    <input type="text_field" name="repo_name">
  </div>

  <div class="field">
    <label>Live Project URL</label>
    <input type="text_field" name="live_url">
  </div>
 

  <div class="field">
    <label>Upload cover image for your app:</label>
    <%= f.fields_for :images do |field| %>
      <%= field.file_field :upload %>
      <%= field.hidden_field :image_type, :value => "cover" %>
      <%= field.hidden_field :position, :value => "0" %>
    <% end %>
  </div>

  <div class="field">
    <label>Upload screenshots of your app:</label>
    <div class="screenshot">
    <%= f.fields_for :images do |field| %>
      <%= field.file_field :upload %>
      <%= field.hidden_field :image_type, :value => "screenshot" %>
      <%= field.hidden_field :position, :value => "1" %>
    <% end %>
    </div>
  </div>
  <input type="button" name="add" id="add" value="+" /><br>

<br>
    <%= f.submit %>

<% end %>
